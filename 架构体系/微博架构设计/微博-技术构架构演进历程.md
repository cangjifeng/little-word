

微博技术架构演进历程

第一代技术体系

LAMP 架构（Linux + Apache + Mysql + Php ）

L ： Linux 系统 ；

A ： Apache 服务器 ；

M ： 数据库 mysql 或者 mariadb ；

P ： PHP 、 Python 、perl 等变成语言 。

第二代技术体系

业务工程模块化 、 服务化 、 组件化 、 后台管理系统使用java 、逐渐形成面向服务的 SOA 架构。

第三代技术体系

使用正交分解法，水平方向采用3层分层模型 ，接口层 、服务层 、资源层 ， 垂直方向分为业务架构 、 技术架构 、 监控平台 、 服务治理平台 。

![微博产品交互简图](%E5%BE%AE%E5%8D%9A%E4%BA%A7%E5%93%81%E4%BA%A4%E4%BA%92%E7%AE%80%E5%9B%BE.jpg)

> ​                                                          [微博产品图]

![](%E5%BE%AE%E5%8D%9A%E7%AC%AC%E4%B8%89%E4%BB%A3%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E5%9B%BE.jpg)

> ​                                               微博第三代技术架构图

### 水平分层

水平维度的划分，是大中型互联网后台业务系统中基础做法，在每一代技术体系中都有体现。

1. 接口层主要实现与 web 页面 、 移动客户端的接口交互 ， 平台最核心的三个接口服务分别是 内容服务(feed) 、 用户关系服务以及通讯服务(单发私信 、群发 、 群聊  )
2. 服务层主要把核心业务模块化、服务化 。这里分为两类服务 ， 一类为原子服务，其定义不依赖于其他服务的服务模块 ， 比如短链服务 、 发号器服务 。另一类为组合服务 ，是通过各种原子服务和业务逻辑的组合产生的服务，是一个综合服务 ， 比如 feed 服务，除了本身的业务逻辑，还依赖于短链服务 、 用户服务 、发号器服务等 。

水平分层的一个特点，依赖关系是从上至下 ， 上层依赖于下层 ，下层的服务不会依赖于上层 ， 构建的是一种简单直接的依赖关系 。 

与分层对应的，微博系统中服务器分包括三种类型，前端机( 提供 API 接口服务) 、 队列机(处理上行业务逻辑 ， 主要是数据写入) 、 存储( mc 、 mysql 、mcp 、 redis 、HBase 等) 。